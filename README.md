[![Release](https://jitpack.io/v/sybila/ode-generator.svg)](https://jitpack.io/#sybila/ode-generator)
[![Build Status](https://travis-ci.org/sybila/ode-generator.svg?branch=master)](https://travis-ci.org/sybila/ode-generator)
[![codecov.io](https://codecov.io/github/sybila/ode-generator/coverage.svg?branch=master)](https://codecov.io/github/sybila/ode-generator?branch=master)
[![License](https://img.shields.io/badge/License-GPL%20v3-blue.svg?style=flat)](https://github.com/sybila/ode-generator/blob/master/LICENSE.txt)
[![Kotlin](https://img.shields.io/badge/kotlin-1.0.0-blue.svg)](http://kotlinlang.org)

State space generator for models based on ordinary differential equations. 
Part of BioDivine tool for model checking and parameter synthesis of biological models.

Repository can be added as a dependency to your project using jitpack (See badge above).

## Model Syntax

So far, only supported format of input model file is **.bio** (or **BIO**) format. 
Every model file has to contain at least the following parts:
- declaration of model variables,
- corresponding thresholds (at least two numeric values have to be defined as the lower and upper bound thresholds for each variable), 
- declaration of parameters (each with a lower and upper bound),
- differential equations (one for each variable).  

The corresponding lines start with predefined keywords and have the following syntax (the order of lines is strongly recommended):

- **VARS: _variables_** (mandatory, only one occurrence) where **_variables_** is a list of variable names delimited by comma (**,**).
- **THRES: _variable\_name: threshold\_values_** (mandatory, one for each model variable) where **_threshold\_values_** is a list of at least two **_numeric\_values_** delimited by comma (**,**) and **_variable_name_** is the reference to **_variables_** list.
- **PARAMS: _parameters_** (mandatory, only one occurrence) where **_parameters_** is a list of expressions delimited by semicolon (**;**) in the form **_param\_name, lower\_bound, upper\_bound_**.
- **CONSTS: _constants_** (optional, only one occurrence) where **_constants_** is a list of named constants delimited by semicolon (**;**) in the form **_constant\_name, constant\_value_**.
- **EQ: _variable\_name = equation\_expression_** (mandatory, one for each model variable) where **_variable\_name_** is the reference to **_variables_** list (syntax of the **_equation\_expression_** is defined later in this section).
- **VAR\_POINTS: _var\_points_** (optional, only one occurrence) where **_var\_points_** is a list delimited by semicolons (**;**) of the form **_variable\_name: valuation\_points, ramps\_count_**. Here, **_valuation\_points_** defines the accuracy of the approximation and **_ramps\_count_** defines the number of additional created thresholds, effectively determining the accuracy of the parameter synthesis process.

In the syntax above, the terms **_lower\_bound_**, **_upper\_bound_**, **_constant\_value_** and **_numeric\_values_** are either integers or floating-point numbers (the scientific notation is not supported), while the terms **_valuation\_points_** and **_ramps\_count_** are integers only. _Note that lines do not end with a semicolon (;) or any other special
ending character._

The syntax of **_equation\_expression_** is defined as an arithmetic expression that uses only the operations **+** (addition), **-** (subtraction or unary negation), and __*__ (multiplication). The operands can be either memebrs of **_numeric\_values_**, **_variables_**, **_constant\_name_**, **_param\_name_**, or the application of one of the following functions:

- [ **_Hp_** | **_Hm_** ]**_(var, thr, a, b)_** is the so-called [Heaviside step function](https://en.wikipedia.org/wiki/Heaviside_step_function) in increasing/positive form  (**_Hp_**) or in decreasing/negative form (**_Hm_**); they are defined in the following way:
  - <a href="https://www.codecogs.com/eqnedit.php?latex=\texttt{Hp}(\texttt{var},\texttt{thr},\texttt{a},\texttt{b})&space;=&space;\begin{cases}&space;\texttt{a},&space;\&space;\&space;\texttt{var}&space;<&space;\texttt{thr}\\&space;\texttt{b},&space;\&space;\&space;\texttt{var}&space;\geq&space;\texttt{thr}&space;\end{cases}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\texttt{Hp}(\texttt{var},\texttt{thr},\texttt{a},\texttt{b})&space;=&space;\begin{cases}&space;\texttt{a},&space;\&space;\&space;\texttt{var}&space;<&space;\texttt{thr}\\&space;\texttt{b},&space;\&space;\&space;\texttt{var}&space;\geq&space;\texttt{thr}&space;\end{cases}" title="\texttt{Hp}(\texttt{var},\texttt{thr},\texttt{a},\texttt{b}) = \begin{cases} \texttt{a}, \ \ \texttt{var} < \texttt{thr}\\ \texttt{b}, \ \ \texttt{var} \geq \texttt{thr} \end{cases}" /></a>
  - <a href="https://www.codecogs.com/eqnedit.php?latex=\texttt{Hm}(\texttt{var},\texttt{thr},\texttt{a},\texttt{b})&space;=&space;\begin{cases}&space;\texttt{b},&space;\&space;\&space;\texttt{var}&space;<&space;\texttt{thr}\\&space;\texttt{a},&space;\&space;\&space;\texttt{var}&space;\geq&space;\texttt{thr}&space;\end{cases}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\texttt{Hm}(\texttt{var},\texttt{thr},\texttt{a},\texttt{b})&space;=&space;\begin{cases}&space;\texttt{b},&space;\&space;\&space;\texttt{var}&space;<&space;\texttt{thr}\\&space;\texttt{a},&space;\&space;\&space;\texttt{var}&space;\geq&space;\texttt{thr}&space;\end{cases}" title="\texttt{Hm}(\texttt{var},\texttt{thr},\texttt{a},\texttt{b}) = \begin{cases} \texttt{b}, \ \ \texttt{var} < \texttt{thr}\\ \texttt{a}, \ \ \texttt{var} \geq \texttt{thr} \end{cases}" /></a>
 
- [ **_Rp_** | **_Rm_** ]**_(var, thr1, thr2, a, b)_** is the so-called [ramp function](https://en.wikipedia.org/wiki/Ramp_function) in increasing/positive form  (**_Rp_**) or in decreasing/negative form (**_Rm_**); but they are defined slightly different here:
  - <a href="https://www.codecogs.com/eqnedit.php?latex=\texttt{R}(\texttt{var},\texttt{thr1},\texttt{thr2},\texttt{a},\texttt{b})&space;=&space;\begin{cases}&space;\texttt{a}&space;&&space;\texttt{var}&space;<&space;\texttt{thr1}&space;\\&space;\texttt{a}&plus;(\texttt{b}-\texttt{a})\cdot\frac{\texttt{var}&space;-&space;\texttt{thr1}}{\texttt{thr2}&space;-&space;\texttt{thr1}}&space;&&space;\texttt{thr1}&space;\leq&space;\texttt{var}&space;\leq&space;\texttt{thr2}&space;\\&space;\texttt{b}&space;&&space;\texttt{var}&space;>&space;\texttt{thr2}&space;\end{cases}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\texttt{R}(\texttt{var},\texttt{thr1},\texttt{thr2},\texttt{a},\texttt{b})&space;=&space;\begin{cases}&space;\texttt{a}&space;&&space;\texttt{var}&space;<&space;\texttt{thr1}&space;\\&space;\texttt{a}&plus;(\texttt{b}-\texttt{a})\cdot\frac{\texttt{var}&space;-&space;\texttt{thr1}}{\texttt{thr2}&space;-&space;\texttt{thr1}}&space;&&space;\texttt{thr1}&space;\leq&space;\texttt{var}&space;\leq&space;\texttt{thr2}&space;\\&space;\texttt{b}&space;&&space;\texttt{var}&space;>&space;\texttt{thr2}&space;\end{cases}" title="\texttt{R}(\texttt{var},\texttt{thr1},\texttt{thr2},\texttt{a},\texttt{b}) = \begin{cases} \texttt{a} & \texttt{var} < \texttt{thr1} \\ \texttt{a}+(\texttt{b}-\texttt{a})\cdot\frac{\texttt{var} - \texttt{thr1}}{\texttt{thr2} - \texttt{thr1}} & \texttt{thr1} \leq \texttt{var} \leq \texttt{thr2} \\ \texttt{b} & \texttt{var} > \texttt{thr2} \end{cases}" /></a>
  - 

- [ **_Hillp_** | **_Hillm_** ]**_(var, thr, n, a, b)_** is the so-called [Hill function](https://en.wikipedia.org/wiki/Hill_equation_(biochemistry)) in positive form (**_Hillp_**) or in negative form (**_Hillm_**); they are defined in the following way:
  - <a href="https://www.codecogs.com/eqnedit.php?latex=\texttt{Hillp}&space;=&space;\texttt{a}&space;&plus;&space;\frac{(\texttt{b}&space;-&space;\texttt{a})\cdot&space;\texttt{var}^\texttt{n}}{\texttt{var}^\texttt{n}&space;&plus;&space;\texttt{thr}^\texttt{n}}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\texttt{Hillp}&space;=&space;\texttt{a}&space;&plus;&space;\frac{(\texttt{b}&space;-&space;\texttt{a})\cdot&space;\texttt{var}^\texttt{n}}{\texttt{var}^\texttt{n}&space;&plus;&space;\texttt{thr}^\texttt{n}}" title="\texttt{Hillp} = \texttt{a} + \frac{(\texttt{b} - \texttt{a})\cdot \texttt{var}^\texttt{n}}{\texttt{var}^\texttt{n} + \texttt{thr}^\texttt{n}}" /></a>
  - <a href="https://www.codecogs.com/eqnedit.php?latex=\texttt{Hillm}&space;=&space;\texttt{a}&space;-&space;\frac{(\texttt{a}&space;-&space;\texttt{b})\cdot&space;\texttt{thr}^\texttt{n}}{\texttt{var}^\texttt{n}&space;&plus;&space;\texttt{thr}^\texttt{n}}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\texttt{Hillm}&space;=&space;\texttt{a}&space;-&space;\frac{(\texttt{a}&space;-&space;\texttt{b})\cdot&space;\texttt{thr}^\texttt{n}}{\texttt{var}^\texttt{n}&space;&plus;&space;\texttt{thr}^\texttt{n}}" title="\texttt{Hillm} = \texttt{a} - \frac{(\texttt{a} - \texttt{b})\cdot \texttt{thr}^\texttt{n}}{\texttt{var}^\texttt{n} + \texttt{thr}^\texttt{n}}" /></a>

  When **_n_** equals 1, the function serves as the [Michaelis-Menten kinetics](https://en.wikipedia.org/wiki/Michaelis%E2%80%93Menten_kinetics). In that case, the parameters **_var_** and **_thr_** have the meaning of <a href="https://www.codecogs.com/eqnedit.php?latex=S,&space;K_\text{m},&space;n" target="_blank"><img src="https://latex.codecogs.com/gif.latex?[S],&space;K_\text{M}" title="S, K_\text{M}" /></a>, respectively. Moreover, if **_a_** equals 0 then **_b_** acts as the maximum rate constant <a href="https://www.codecogs.com/eqnedit.php?latex=V_\text{max}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?V_\text{max}" title="V_\text{max}" /></a>.
